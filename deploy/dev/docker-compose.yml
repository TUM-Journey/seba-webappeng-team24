version: '3'
services:
  backend-server:
    build:
      context: ../../backend/
    volumes:
    - ../../backend:/backend
    ports:
    - "${server_port}:${server_port}"
    links:
    - persistence-mongo-dev
    environment:
    - "db_url=mongodb://persistence-mongo-dev/test"
    - "server_port=${server_port}"
    - "auth_enabled=${auth}"
  persistence-mongo-dev:
    build:
      context: ./db/
    ports:
    - "27017:27017"
  frontend-server:
    environment:
      - "api_url=${protocol}://${server_domain}:${server_port}/api"
    build:
      context: ../../frontend/
    volumes:
    - ../../frontend:/frontend
    ports:
    - "${fe_port}:8000"
